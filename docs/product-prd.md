# OpenCane 产品功能 PRD（V1）

更新时间：2026-02-22  
文档定位：面向产品、运营、交付与项目管理，不面向底层代码实现细节。

## 1. 产品定义

OpenCane 的产品目标是打造“给视障人士使用的 OpenClaw”，以智能盲杖为交互载体，提供可持续演进的 AI 助盲后端能力。  
后端目标是打通“设备接入 -> 语音对话 -> 图像理解与记忆 -> 任务执行 -> 安全回传 -> 运营观测”的闭环。

交互载体与方式：

- 交互载体：智能盲杖硬件
- 主要输入：语音 + 按钮
- 主要反馈：语音播报 + 震动反馈

产品形态：

- 后端运行时（单实例可部署）
- 控制面 API（设备管理、任务管理、状态查询）
- 多硬件适配层（统一接入不同蜂窝模组）

## 2. 目标用户与角色

1. 终端用户（盲人用户）  
通过盲杖进行语音交互、环境感知与辅助提醒。
2. 设备/固件团队  
接入设备上报与下行指令，完成硬件联调。
3. 运营与客服团队  
查看运行状态、任务状态与关键风险记录，支持排障和服务保障。
4. 平台运维团队  
负责部署、安全配置、容量与稳定性维护。

## 3. 产品目标与成功指标

核心目标：

1. 实现“语音 + 按钮 + 震动反馈”三位一体的人机交互链路稳定可用。
2. 实现图像 lifelog 入库、检索与风险标注。
3. 支持设备级任务执行与状态回推。
4. 支持多蜂窝模组统一接入，降低硬件适配成本。

建议 KPI（V1）：

- 语音回合成功率 >= 95%
- 图像入库成功率 >= 98%
- 数字任务执行成功率 >= 90%（不含外部服务故障）
- 控制 API 可用性 >= 99%
- 关键告警可观测（离线率、队列积压、回合失败率）

## 4. 核心使用场景

1. 语音问答场景  
用户通过按钮触发语音采集，后端完成识别、推理并返回语音播报，必要时附加震动提示。
2. 视觉辅助场景  
设备上传图像，系统分析后支持“语义检索 + 时间线回看 + 风险筛查”。
3. 任务代办场景  
用户发出任务目标（如查天气/路线信息），系统异步执行并回推状态。
4. 设备运营场景  
运营人员通过 API 完成设备注册、绑定、激活、撤销与状态检查。

## 5. 功能需求清单（V1）

### 5.1 设备接入与会话管理

功能范围：

- 支持 `mock / websocket / ec600 / generic_mqtt` 适配器
- `generic_mqtt` 支持 `ec600mcnle_v1 / a7670c_v1 / sim7600g_h_v1 / ec800m_v1 / ml307r_dl_v1`
- 统一协议事件：`hello / heartbeat / listen_start / audio_chunk / listen_stop`
- 可选事件：`image_ready / telemetry / tool_result`

产品价值：

- 同一后端覆盖多硬件路线，降低后续硬件切换成本
- 统一会话语义，减少上层业务分叉

### 5.2 语音对话能力

功能范围：

- 音频分段、VAD、转写、Agent 回复生成
- 播报中断（新一轮 `listen_start` 可打断当前播报）
- 支持文本下发或服务端音频下发

产品价值：

- 保证盲杖主交互链路实时、可打断、可连续

### 5.3 图像 Lifelog 与记忆检索

功能范围：

- 图像异步入队与处理（分析、去重、结构化）
- 时间线检索（timeline）与语义检索（query）
- 风险记录与统计（safety/safety stats）
- 可选思维轨迹留痕（thought trace）

产品价值：

- 提供“看过什么、何时发生、是否有风险”的可回溯能力

### 5.4 长上下文记忆

功能范围：

- 基于 lifelog 数据沉淀会话上下文
- 通过向量后端（chroma/qdrant）进行语义召回
- 结合 session 维度实现跨回合记忆增强

产品价值：

- 提升多轮对话连续性与上下文相关性

### 5.5 数字任务系统

功能范围：

- 任务创建、查询、取消、统计
- 状态机：`pending -> running -> success/failed/timeout/canceled`
- 执行策略：MCP 优先，失败回退 Web/Exec
- 设备离线场景支持状态重试回推

产品价值：

- 将“即时问答”扩展为“可追踪的任务执行”

### 5.6 控制面与设备运营

功能范围：

- 设备注册、绑定、激活、撤销、绑定查询、设备状态查询
- 设备操作下发、回执、查询
- 运行状态与观测接口（status/observability/history）

产品价值：

- 支撑设备全生命周期管理与运营排障

### 5.7 安全与治理

功能范围：

- token 鉴权
- 可选请求限流、防重放、请求体大小限制
- 数据保留清理与本地备份恢复能力

产品价值：

- 在真实生产部署中满足基础安全与可运维要求

## 6. 非功能需求

1. 部署模式  
支持单容器生产部署，配置与数据外置挂载。
2. 可用性  
支持运行时健康检查、历史观测与故障回溯。
3. 性能与容量（单容器参考）  
`4 vCPU / 8GB RAM / 100GB NVMe` 推荐支撑约 `20-40` 台设备（每设备每日语音 500 回合 + 图像 100 次）。
4. 可扩展性  
可扩展到新蜂窝模组 profile，不改业务主流程。

## 7. 版本边界（V1 不包含）

- 终端 App UI 产品
- OTA 生命周期管理平台（版本包、灰度、回滚全流程）
- 多租户 SaaS 控制平面
- 外部监控平台深度集成（如 Prometheus/Grafana 一体化）

## 8. 验收标准（产品视角）

1. 主链路验收  
可稳定跑通语音回合、图像入库检索、任务执行查询三条主路径。
2. 设备验收  
至少 1 种真实硬件 profile 联调成功，其他 profile 可通过协议仿真联调。
3. 安全验收  
鉴权开启后控制 API 能正确拦截未授权请求。
4. 运行验收  
可通过 API 获取实时与历史观测指标，并用于问题定位。
5. 数据验收  
能执行 retention 清理与备份恢复演练。

## 9. 发布建议

1. 先以 `staging` 配置完成联调与回归。
2. 生产启用鉴权与保守容量参数。
3. 以灰度设备分批接入，观察 24h 指标后再扩量。
